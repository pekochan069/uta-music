---
import { RotateSwap } from "~/components/common/swap";

import { recipe } from "./ThemeProvider.styles";

const styles = recipe();
---

<RotateSwap class={styles.swap} inputId="theme-input">
  <svg
    class="swap-off"
    height="32"
    viewBox="0 0 24 24"
    width="32"
    xmlns="http://www.w3.org/2000/svg"
    ><path
      d="M11 5V1h2v4zm6.65 2.75l-1.375-1.375l2.8-2.875l1.4 1.425zM19 13v-2h4v2zm-8 10v-4h2v4zM6.35 7.7L3.5 4.925l1.425-1.4L7.75 6.35zm12.7 12.8l-2.775-2.875l1.35-1.35l2.85 2.75zM1 13v-2h4v2zm3.925 7.5l-1.4-1.425l2.8-2.8l.725.675l.725.7zM12 18q-2.5 0-4.25-1.75T6 12q0-2.5 1.75-4.25T12 6q2.5 0 4.25 1.75T18 12q0 2.5-1.75 4.25T12 18"
      fill="currentColor"></path></svg
  >
  <svg
    class="swap-on"
    height="32"
    viewBox="0 0 24 24"
    width="32"
    xmlns="http://www.w3.org/2000/svg"
    ><path
      d="M9.5 2q2.075 0 3.9.788t3.175 2.137q1.35 1.35 2.138 3.175T19.5 12q0 2.075-.788 3.9t-2.137 3.175q-1.35 1.35-3.175 2.138T9.5 22q-1.325 0-2.588-.337T4.5 20.65Q6.825 19.3 8.163 17T9.5 12q0-2.7-1.338-5T4.5 3.35q1.15-.675 2.413-1.012T9.5 2"
      fill="currentColor"></path></svg
  >
</RotateSwap>
<script is:inline>
  const registerColorModeToggle = () => {
    document.getElementById("theme-input").addEventListener("change", () => {
      document.documentElement.classList.toggle("dark");
      const isDark = document.documentElement.classList.contains("dark");
      localStorage.setItem("color-mode", isDark ? "dark" : "light");
    });
  };

  registerColorModeToggle();

  document.addEventListener("astro:before-swap", () => {
    registerColorModeToggle();
  });
</script>
